"use strict";function Body(e,o,t){this.coords=o,this.mass=e,this.radius=this.mass*SIZE_MULTIPLIER/2,console.log(this.radius),this.isRepeller=t,this.fillStyle="rgb(0,"+Math.round(100+155*Math.random())+","+Math.round(100+155*Math.random())+")",this.createEl=function(){this.draw()},this.draw=function(){ctx.fillStyle=this.fillStyle,ctx.beginPath(),ctx.arc(this.coords.x-this.radius,this.coords.y-this.radius,this.radius,0,2*Math.PI,!1),ctx.fill()},this.createEl()}function FixedBody(e,o,t){Body.call(this,e,o,t),this.update=function(){this.coords.x+=0,this.coords.y+=0}}function MovableBody(e,o,t,a){Body.call(this,e,o,a),this.velocity=t,this.calcDistanceFrom=function(e){var o={};return o.x=this.coords.x-e.coords.x,o.y=this.coords.y-e.coords.y,o.total=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),o},this.calcForceFromOther=function(e){var o={},t=this.calcDistanceFrom(e);return o.total=gravity*this.mass*e.mass/Math.pow(t.total,2),o.direction=Math.atan2(t.y,t.x),o.directionDegs=180*o.direction/Math.PI,o},this.update=function(){var e=!0,o=!1,t=void 0;try{for(var a,i=fixedBodies[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value,n=r,d=this.calcForceFromOther(n),s={};s.total=d.total/this.mass,s.x=-s.total*Math.cos(d.direction),s.x=n.isRepeller?-s.x:s.x,s.y=-s.total*Math.sin(d.direction),s.y=n.isRepeller?-s.y:s.y,this.velocity={x:this.velocity.x*(1-DAMPING/1e5)+s.x,y:this.velocity.y*(1-DAMPING/1e5)+s.y}}}catch(e){o=!0,t=e}finally{try{!e&&i.return&&i.return()}finally{if(o)throw t}}this.coords.x+=this.velocity.x,this.coords.y+=this.velocity.y}}function initializeCanvas(){canvas=document.getElementById("field"),ctx=canvas.getContext("2d"),resizeCanvas()}function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,ctx.translate(window.innerWidth/2,window.innerHeight/2),ctx.imageSmoothingEnabled=!0}function updatePositions(){var e=!0,o=!1,t=void 0;try{for(var a,i=fixedBodies[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;r.update()}}catch(e){o=!0,t=e}finally{try{!e&&i.return&&i.return()}finally{if(o)throw t}}var n=!0,d=!1,s=void 0;try{for(var h,y=movableBodies[Symbol.iterator]();!(n=(h=y.next()).done);n=!0){var x=h.value;x.update()}}catch(e){d=!0,s=e}finally{try{!n&&y.return&&y.return()}finally{if(d)throw s}}}function redraw(){ctx.clearRect(-2e3,-2e3,4e3,4e3);var e=!0,o=!1,t=void 0;try{for(var a,i=fixedBodies[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;r.draw()}}catch(e){o=!0,t=e}finally{try{!e&&i.return&&i.return()}finally{if(o)throw t}}var n=!0,d=!1,s=void 0;try{for(var h,y=movableBodies[Symbol.iterator]();!(n=(h=y.next()).done);n=!0){var x=h.value;x.draw()}}catch(e){d=!0,s=e}finally{try{!n&&y.return&&y.return()}finally{if(d)throw s}}}function repeat(e){updatePositions(),redraw(),window.requestAnimationFrame(repeat)}var gravity=20,FPS=10,SIZE_MULTIPLIER=.6,DAMPING=0,canvas,ctx,fixedBodies=[],movableBodies=[],sun,sun2,sun3,earth,mars;$(document).ready(function(){saves.manyRepellersRandom()}),document.addEventListener("DOMContentLoaded",function(e){initializeCanvas()}),window.addEventListener("resize",resizeCanvas,!1),window.requestAnimationFrame(repeat);var saves={singleOrbiter:function(){fixedBodies.push(new FixedBody(30,{x:0,y:0},!1));for(var e=0;e<1;e++)for(var o=0;o<1;o++)movableBodies.push(new MovableBody(5,{x:5*e,y:300+3*o},{x:1+.2*(e/20),y:-1+1*(o/30)},!1))},twoAttractors1:function(){fixedBodies.push(new FixedBody(30,{x:0,y:0},!1)),fixedBodies.push(new FixedBody(10,{x:-300,y:-300},!1));for(var e=0;e<1;e++)for(var o=0;o<30;o++)movableBodies.push(new MovableBody(5,{x:5*e,y:300+3*o},{x:1+.2*(e/20),y:-1+1*(o/30)},!1))},attractorAndRepeller:function(){fixedBodies.push(new FixedBody(30,{x:0,y:0},!1)),fixedBodies.push(new FixedBody(10,{x:-300,y:-300},!0));for(var e=0;e<1;e++)for(var o=0;o<30;o++)movableBodies.push(new MovableBody(5,{x:5*e,y:300+3*o},{x:1+.2*(e/20),y:-1+1*(o/30)},!1))},manyRepellers:function(){fixedBodies.push(new FixedBody(30,{x:-300,y:-300},!0)),fixedBodies.push(new FixedBody(30,{x:300,y:-300},!0)),fixedBodies.push(new FixedBody(30,{x:-300,y:300},!0)),fixedBodies.push(new FixedBody(30,{x:300,y:300},!0)),fixedBodies.push(new FixedBody(30,{x:450,y:0},!0)),fixedBodies.push(new FixedBody(30,{x:-450,y:0},!0)),fixedBodies.push(new FixedBody(30,{x:0,y:450},!0)),fixedBodies.push(new FixedBody(30,{x:0,y:-450},!0)),fixedBodies.push(new FixedBody(20,{x:60,y:30},!0));for(var e=0;e<30;e++)for(var o=0;o<30;o++)movableBodies.push(new MovableBody(5,{x:-200.5+15*e+.5*Math.random(),y:-200.5+15*o+.5*Math.random()},{x:0,y:0},!1))},manyRepellersRandom:function(){fixedBodies.push(new FixedBody(20+5*Math.random(),{x:-500+100*Math.random(),y:-500+100*Math.random()},!0)),fixedBodies.push(new FixedBody(20+5*Math.random(),{x:-300+100*Math.random(),y:300+100*Math.random()},!0)),fixedBodies.push(new FixedBody(20+5*Math.random(),{x:400+100*Math.random(),y:-200+100*Math.random()},!0));for(var e=0;e<50;e++)for(var o=0;o<50;o++)movableBodies.push(new MovableBody(5,{x:-500.5+20*e+.5*Math.random(),y:-500.5+20*o+.5*Math.random()},{x:0,y:0},!1))},oneAttractorManyPlanets:function(){fixedBodies.push(new FixedBody(20+5*Math.random(),{x:-100+200*Math.random(),y:-100+200*Math.random()},!1));for(var e=0;e<50;e++)for(var o=0;o<50;o++)movableBodies.push(new MovableBody(5,{x:-500.5+20*e+.5*Math.random(),y:-500.5+20*o+.5*Math.random()},{x:2,y:0},!1))},oneAttractorManyPlanets2:function(){fixedBodies.push(new FixedBody(30+5*Math.random(),{x:-100+200*Math.random(),y:-100+200*Math.random()},!1));for(var e=0;e<25;e++)for(var o=0;o<25;o++)movableBodies.push(new MovableBody(5,{x:-300.5+4*e+.5*Math.random(),y:-300.5+4*o+.5*Math.random()},{x:1,y:0},!1))},oneAttractorManyPlanets3:function(){var e={x:-200,y:-200},o=50,t=10,a=20;fixedBodies.push(new FixedBody(60+5*Math.random(),{x:-100+200*Math.random(),y:-100+200*Math.random()},!1));for(var i=1;i<=t;i++){for(var r=0;r<a;r++)movableBodies.push(new MovableBody(5,{x:e.x+o*(i/t)*Math.sin(360*r/a/180*Math.PI),y:e.y+o*(i/t)*Math.cos(Math.PI*(360*r/a)/180)},{x:1,y:-1},!1));a+=5}}};