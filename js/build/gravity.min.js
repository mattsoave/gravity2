"use strict";function Body(e,i,o,a){this.mass=e,this.coords=i,this.velocity=o,this.radius=this.mass*DEFAULT_UNIVERSE_SETTINGS.sizeMultiplier/2,this.isRepeller=a,this.fillStyle="rgb(0,"+Math.round(100+155*Math.random())+","+Math.round(100+155*Math.random())+")",this.draw=function(){ctx.fillStyle=this.fillStyle,ctx.beginPath(),ctx.arc(this.coords.x-this.radius,this.coords.y-this.radius,this.radius,0,2*Math.PI,!1),ctx.fill()},this.draw()}function FixedBody(e,i,o,a){Body.call(this,e,i,o,a),this.update=function(){this.velocity={x:this.velocity.x*(1-DEFAULT_UNIVERSE_SETTINGS.damping/1e5),y:this.velocity.y*(1-DEFAULT_UNIVERSE_SETTINGS.damping/1e5)},this.coords.x+=this.velocity.x,this.coords.y+=this.velocity.y}}function MovableBody(e,i,o,a){Body.call(this,e,i,o,a),this.calcDistanceFrom=function(e){var i={};return i.x=this.coords.x-e.coords.x,i.y=this.coords.y-e.coords.y,i.total=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),i},this.calcForceFromOther=function(e){var i={},o=this.calcDistanceFrom(e);return i.total=DEFAULT_UNIVERSE_SETTINGS.gravity*this.mass*e.mass/Math.pow(o.total,2),i.direction=Math.atan2(o.y,o.x),i.directionDegs=180*i.direction/Math.PI,i},this.update=function(){var e=!0,i=!1,o=void 0;try{for(var a,t=fixedBodies[Symbol.iterator]();!(e=(a=t.next()).done);e=!0){var n=a.value,r=this.calcForceFromOther(n),d={};d.total=r.total/this.mass,d.x=-d.total*Math.cos(r.direction),d.x=n.isRepeller?-d.x:d.x,d.y=-d.total*Math.sin(r.direction),d.y=n.isRepeller?-d.y:d.y,this.velocity={x:this.velocity.x*(1-DEFAULT_UNIVERSE_SETTINGS.damping/1e5)+d.x,y:this.velocity.y*(1-DEFAULT_UNIVERSE_SETTINGS.damping/1e5)+d.y}}}catch(e){i=!0,o=e}finally{try{!e&&t.return&&t.return()}finally{if(i)throw o}}this.coords.x+=this.velocity.x,this.coords.y+=this.velocity.y}}function initializeCanvas(){canvas=document.getElementById("field"),canvas.addEventListener("mousedown",onMouseDown,!1),canvas.addEventListener("mouseup",onMouseUp,!1),ctx=canvas.getContext("2d"),resizeCanvas()}function onMouseDown(e){clickOrigin={x:e.pageX,y:e.pageY},console.log(e)}function onMouseUp(e){clickDestination={x:e.pageX,y:e.pageY};var i={x:clickDestination.x-clickOrigin.x,y:clickDestination.y-clickOrigin.y};console.log(i),movableBodies.push(new MovableBody(5+10*Math.random(),{x:clickOrigin.x,y:clickOrigin.y},{x:i.x/100,y:i.y/100},!1))}function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,ctx.imageSmoothingEnabled=!0}function updatePositions(){var e=!0,i=!1,o=void 0;try{for(var a,t=fixedBodies[Symbol.iterator]();!(e=(a=t.next()).done);e=!0){var n=a.value;n.update()}}catch(e){i=!0,o=e}finally{try{!e&&t.return&&t.return()}finally{if(i)throw o}}var r=!0,d=!1,s=void 0;try{for(var y,c=movableBodies[Symbol.iterator]();!(r=(y=c.next()).done);r=!0){var l=y.value;l.update()}}catch(e){d=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(d)throw s}}}function redraw(){DEFAULT_UNIVERSE_SETTINGS.eraseTrails&&ctx.clearRect(-2e3,-2e3,4e3,4e3);var e=!0,i=!1,o=void 0;try{for(var a,t=fixedBodies[Symbol.iterator]();!(e=(a=t.next()).done);e=!0){var n=a.value;n.draw()}}catch(e){i=!0,o=e}finally{try{!e&&t.return&&t.return()}finally{if(i)throw o}}var r=!0,d=!1,s=void 0;try{for(var y,c=movableBodies[Symbol.iterator]();!(r=(y=c.next()).done);r=!0){var l=y.value;l.draw()}}catch(e){d=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(d)throw s}}}function repeat(e){updatePositions(),redraw(),window.requestAnimationFrame(repeat)}var gravity=20,FPS=10,SIZE_MULTIPLIER=.6,DAMPING=0,DEFAULT_UNIVERSE_SETTINGS={gravity:20,sizeMultiplier:.6,damping:0,eraseTrails:!0},canvas,ctx,fixedBodies=[],movableBodies=[],sun,sun2,sun3,earth,mars;$(document).ready(function(){fixedBodies.push(new FixedBody(30,{x:0,y:0},{x:.2,y:.1},!1))});var scale=1,originx=0,originy=0,clickOrigin={},clickDestination={};document.addEventListener("DOMContentLoaded",function(e){initializeCanvas(),canvas.onmousewheel=function(e){ctx.clearRect(-5e3,-5e3,1e4,1e4);var i=e.clientX-canvas.offsetLeft,o=e.clientY-canvas.offsetTop,a=e.wheelDelta/120,t=1+a/6;ctx.translate(originx,originy),ctx.scale(t,t),ctx.translate(-(i/scale+originx-i/(scale*t)),-(o/scale+originy-o/(scale*t))),originx=i/scale+originx-i/(scale*t),originy=o/scale+originy-o/(scale*t),scale*=t}}),window.addEventListener("resize",resizeCanvas,!1),window.requestAnimationFrame(repeat);var saves={singleOrbiter:function(){fixedBodies.push(new FixedBody(30,{x:-1e3,y:-1e3},{x:.2,y:.1},!1)),movableBodies.push(new MovableBody(5,{x:-800,y:-800},{x:1,y:-1},!1))},twoAttractors1:function(){fixedBodies.push(new FixedBody(30,{x:0,y:0},!1)),fixedBodies.push(new FixedBody(10,{x:-300,y:-300},!1));for(var e=0;e<1;e++)for(var i=0;i<30;i++)movableBodies.push(new MovableBody(5,{x:5*e,y:300+3*i},{x:1+.2*(e/20),y:-1+1*(i/30)},!1))},attractorAndRepeller:function(){fixedBodies.push(new FixedBody(30,{x:0,y:0},!1)),fixedBodies.push(new FixedBody(10,{x:-300,y:-300},!0));for(var e=0;e<1;e++)for(var i=0;i<30;i++)movableBodies.push(new MovableBody(5,{x:5*e,y:300+3*i},{x:1+.2*(e/20),y:-1+1*(i/30)},!1))},manyRepellers:function(){fixedBodies.push(new FixedBody(30,{x:-300,y:-300},!0)),fixedBodies.push(new FixedBody(30,{x:300,y:-300},!0)),fixedBodies.push(new FixedBody(30,{x:-300,y:300},!0)),fixedBodies.push(new FixedBody(30,{x:300,y:300},!0)),fixedBodies.push(new FixedBody(30,{x:450,y:0},!0)),fixedBodies.push(new FixedBody(30,{x:-450,y:0},!0)),fixedBodies.push(new FixedBody(30,{x:0,y:450},!0)),fixedBodies.push(new FixedBody(30,{x:0,y:-450},!0)),fixedBodies.push(new FixedBody(20,{x:60,y:30},!0));for(var e=0;e<30;e++)for(var i=0;i<30;i++)movableBodies.push(new MovableBody(5,{x:-200.5+15*e+.5*Math.random(),y:-200.5+15*i+.5*Math.random()},{x:0,y:0},!1))},manyRepellersRandom:function(){fixedBodies.push(new FixedBody(20+5*Math.random(),{x:-500+100*Math.random(),y:-500+100*Math.random()},!0)),fixedBodies.push(new FixedBody(20+5*Math.random(),{x:-300+100*Math.random(),y:300+100*Math.random()},!0)),fixedBodies.push(new FixedBody(20+5*Math.random(),{x:400+100*Math.random(),y:-200+100*Math.random()},!0));for(var e=0;e<50;e++)for(var i=0;i<50;i++)movableBodies.push(new MovableBody(5,{x:-500.5+20*e+.5*Math.random(),y:-500.5+20*i+.5*Math.random()},{x:0,y:0},!1))},oneAttractorManyPlanets:function(){fixedBodies.push(new FixedBody(20+5*Math.random(),{x:-100+200*Math.random(),y:-100+200*Math.random()},!1));for(var e=0;e<50;e++)for(var i=0;i<50;i++)movableBodies.push(new MovableBody(5,{x:-500.5+20*e+.5*Math.random(),y:-500.5+20*i+.5*Math.random()},{x:2,y:0},!1))},oneAttractorManyPlanets2:function(){fixedBodies.push(new FixedBody(30+5*Math.random(),{x:-100+200*Math.random(),y:-100+200*Math.random()},!1));for(var e=0;e<25;e++)for(var i=0;i<25;i++)movableBodies.push(new MovableBody(5,{x:-300.5+4*e+.5*Math.random(),y:-300.5+4*i+.5*Math.random()},{x:1,y:0},!1))},oneAttractorManyPlanets3:function(){var e={x:-200,y:-200},i=50,o=10,a=20;fixedBodies.push(new FixedBody(60+5*Math.random(),{x:-100+200*Math.random(),y:-100+200*Math.random()},!1));for(var t=1;t<=o;t++){for(var n=0;n<a;n++)movableBodies.push(new MovableBody(5,{x:e.x+i*(t/o)*Math.sin(360*n/a/180*Math.PI),y:e.y+i*(t/o)*Math.cos(Math.PI*(360*n/a)/180)},{x:1,y:-1},!1));a+=5}}};